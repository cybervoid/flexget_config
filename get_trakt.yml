secrets: secrets.yml

templates:
  download:
    seen: local
    verify_ssl_certificates: no
    priority: 2
    transmission:
      host: localhost
      port: 9091
      username: '{{ secrets.transmission.user }}'
      password: '{{ secrets.transmission.password }}'
      addpaused: no

tasks:
  # download las peliculas de imdb
  movie-queue:
    trakt_list:
      username: '{{secrets.trakt.user}}'
#      account: '{{secrets.trakt.user}}'
      list: watchlist
      type: movies
    accept_all: yes
    trakt_remove:
      username: '{{secrets.trakt.user}}'
      account: '{{secrets.trakt.user}}'
      list: watchlist
    movie_queue:
      action: add
      quality: hdrip+ !cam
    seen: local
    priority: 0

 #download movies from queue, from rss feed
  download-movies:
    template: [download]
    discover:
      what:
        - emit_movie_queue: yes
      from:
        - torrentz: verified
        - kat:
            category: movies
            verified: yes
        - piratebay:
            category: movies
        - rarbg:
            sorted_by: seeders

    movie_queue: accept
    exists_movie:
      path:
        - /media/transmission/films_flex
        - /media/films/films
      allow_different_qualities: better

#    seen: local
    regexp:
      reject:
        - \b3D\b: {from: title}
#    priority: 2
    transmission:
      path: /media/transmission/films_flex
    priority: 2

schedules:
  - tasks:
      - movie-queue
      - download-movies
      - sort-movies


    interval:
      hours: 2
